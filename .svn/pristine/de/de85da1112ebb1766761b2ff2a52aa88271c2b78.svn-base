!function(a){"use strict";var b=function(){return"function"!=typeof PNG||"function"!=typeof FlateStream},c=function(b){return b!==a.image_compression.NONE&&d()},d=function(){var a="function"==typeof Deflater;if(!a)throw new Error("requires deflate.js for compression");return a},e=function(b,c,d,e){var i=5,n=k;switch(e){case a.image_compression.FAST:i=3,n=j;break;case a.image_compression.MEDIUM:i=6,n=l;break;case a.image_compression.SLOW:i=9,n=m}b=h(b,c,d,n);var o=new Uint8Array(f(i)),p=g(b),q=new Deflater(i),r=q.append(b),s=q.flush(),t=o.length+r.length+s.length,u=new Uint8Array(t+4);return u.set(o),u.set(r,o.length),u.set(s,o.length+r.length),u[t++]=p>>>24&255,u[t++]=p>>>16&255,u[t++]=p>>>8&255,u[t++]=255&p,a.arrayBufferToBinaryString(u)},f=function(a,b){var c=8,d=Math.LOG2E*Math.log(32768)-8,e=d<<4|c,f=e<<8,g=Math.min(3,(b-1&255)>>1);return f|=g<<6,f|=0,f+=31-f%31,[e,255&f&255]},g=function(a,b){for(var g,c=1,d=65535&c,e=c>>>16&65535,f=a.length,h=0;f>0;){g=f>b?b:f,f-=g;do d+=a[h++],e+=d;while(--g);d%=65521,e%=65521}return(e<<16|d)>>>0},h=function(a,b,c,d){for(var i,j,k,e=a.length/b,f=new Uint8Array(a.length+e),g=o(),h=0;h<e;h++){if(k=h*b,i=a.subarray(k,k+b),d)f.set(d(i,c,j),k+h);else{for(var l=0,m=g.length,n=[];l<m;l++)n[l]=g[l](i,c,j);var q=p(n.concat());f.set(n[q],k+h)}j=i}return f},i=function(a,b,c){var d=Array.apply([],a);return d.unshift(0),d},j=function(a,b,c){var g,d=[],e=0,f=a.length;for(d[0]=1;e<f;e++)g=a[e-b]||0,d[e+1]=a[e]-g+256&255;return d},k=function(a,b,c){var g,d=[],e=0,f=a.length;for(d[0]=2;e<f;e++)g=c&&c[e]||0,d[e+1]=a[e]-g+256&255;return d},l=function(a,b,c){var g,h,d=[],e=0,f=a.length;for(d[0]=3;e<f;e++)g=a[e-b]||0,h=c&&c[e]||0,d[e+1]=a[e]+256-(g+h>>>1)&255;return d},m=function(a,b,c){var g,h,i,j,d=[],e=0,f=a.length;for(d[0]=4;e<f;e++)g=a[e-b]||0,h=c&&c[e]||0,i=c&&c[e-b]||0,j=n(g,h,i),d[e+1]=a[e]-j+256&255;return d},n=function(a,b,c){var d=a+b-c,e=Math.abs(d-a),f=Math.abs(d-b),g=Math.abs(d-c);return e<=f&&e<=g?a:f<=g?b:c},o=function(){return[i,j,k,l,m]},p=function(a){for(var d,e,f,b=0,c=a.length;b<c;)d=q(a[b].slice(1)),(d<e||!e)&&(e=d,f=b),b++;return f},q=function(a){for(var b=0,c=a.length,d=0;b<c;)d+=Math.abs(a[b++]);return d};a.processPNG=function(a,d,f,g,h){var l,m,n,o,p,q,i=this.color_spaces.DEVICE_RGB,j=this.decode.FLATE_DECODE,k=8;if(this.isArrayBuffer(a)&&(a=new Uint8Array(a)),this.isArrayBufferView(a)){if(b())throw new Error("PNG support requires png.js and zlib.js");if(l=new PNG(a),a=l.imgData,k=l.bits,i=l.colorSpace,o=l.colors,[4,6].indexOf(l.colorType)!==-1){if(8===l.bits)for(var y,z,r=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer),s=r.length,t=new Uint8Array(s*l.colors),u=new Uint8Array(s),v=l.pixelBitlength-l.bits,w=0,x=0;w<s;w++){for(y=r[w],z=0;z<v;)t[x++]=y>>>z&255,z+=l.bits;u[w]=y>>>z&255}if(16===l.bits){for(var y,r=new Uint32Array(l.decodePixels().buffer),s=r.length,t=new Uint8Array(s*(32/l.pixelBitlength)*l.colors),u=new Uint8Array(s*(32/l.pixelBitlength)),A=l.colors>1,w=0,x=0,B=0;w<s;)y=r[w++],t[x++]=y>>>0&255,A&&(t[x++]=y>>>16&255,y=r[w++],t[x++]=y>>>0&255),u[B++]=y>>>16&255;k=8}c(g)?(a=e(t,l.width*l.colors,l.colors,g),q=e(u,l.width,1,g)):(a=t,q=u,j=null)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,p=l.palette,l.transparency.indexed)){for(var C=l.transparency.indexed,D=0,w=0,s=C.length;w<s;++w)D+=C[w];if(D/=255,D===s-1&&C.indexOf(0)!==-1)n=[C.indexOf(0)];else if(D!==s){for(var r=l.decodePixels(),u=new Uint8Array(r.length),w=0,s=r.length;w<s;w++)u[w]=C[r[w]];q=e(u,l.width,1)}}return m=j===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+o+" /BitsPerComponent "+k+" /Columns "+l.width:"/Colors "+o+" /BitsPerComponent "+k+" /Columns "+l.width,(this.isArrayBuffer(a)||this.isArrayBufferView(a))&&(a=this.arrayBufferToBinaryString(a)),(q&&this.isArrayBuffer(q)||this.isArrayBufferView(q))&&(q=this.arrayBufferToBinaryString(q)),this.createImageInfo(a,l.width,l.height,i,k,j,d,f,m,n,p,q)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(jsPDF.API);